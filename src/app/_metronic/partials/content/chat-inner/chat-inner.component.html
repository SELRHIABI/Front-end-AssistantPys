<div
  class="scroll-y me-n5 pe-5"
  [ngClass]="!isDrawer ? 'h-300px h-lg-auto' : ''"
  data-kt-element="messages"
  data-kt-scroll="true"
  data-kt-scroll-activate="{default: false, lg: true}"
  data-kt-scroll-max-height="auto"
  [attr.data-kt-scroll-dependencies]="
    isDrawer
      ? '#kt_drawer_chat_messenger_header, #kt_drawer_chat_messenger_footer'
      : '#kt_header, #kt_toolbar, #kt_footer, #kt_chat_messenger_header, #kt_chat_messenger_footer'
  "
  [attr.data-kt-scroll-wrappers]="
    isDrawer
      ? '#kt_drawer_chat_messenger_body'
      : '#kt_content, #kt_chat_messenger_body'
  "
  [attr.data-kt-scroll-offset]="isDrawer ? '0px' : '-2px'"
>
  <ng-container *ngFor="let message of messages">
    <div
      [ngClass]="{
        'd-flex': !isDrawer,
        'd-none': message.template,
        'justify-content-start': true
      }"
      [attr.data-kt-element]="'template-in'"
      class="mb-10"
    >
      <div
        class="d-flex flex-column align-items"
        [ngClass]="'align-items-start'"
      >
        <div class="d-flex align-items-center mb-2">
          <ng-container *ngIf="true">
            <div div class="symbol symbol-35px symbol-circle"></div>
            <div class="ms-3  p-5 rounded text-dark fw-bold mw-lg-400px bg-light-primary text-end">
              {{ message.message}}
            </div>
          </ng-container>
        </div>

        <div data-kt-element="message-text" [innerHTML]="message.text"></div>
      </div>
    </div>

    <div
      [ngClass]="{
        'd-flex': !isDrawer,
        'd-none': message.template,
        'justify-content-end': true
      }"
      [attr.data-kt-element]="'template-in'"
      class="mb-10"
    >
      <div
        class="d-flex flex-column align-items"
        [ngClass]="'align-items-start'"
      >
        <div class="d-flex align-items-center mb-2">
          <ng-container *ngIf="true">
            <div div class="symbol symbol-35px symbol-circle"></div>
            <div class="ms-3 p-5 rounded text-dark fw-bold mw-lg-400px bg-light-info text-start">
              {{ message.response}}
            </div>
          </ng-container>
        </div>

        <div data-kt-element="message-text" [innerHTML]="message.text"></div>
      </div>
    </div>
  </ng-container>
</div>

<div class="card-footer pt-4">
  <textarea
    #messageInput
    class="form-control form-control-flush mb-3"
    rows="1"
    data-kt-element="input"
    placeholder="Type a message"
  ></textarea>

  <div class="d-flex flex-stack">
    <div class="d-flex align-items-center me-2">
      <button
        class="btn btn-sm btn-icon btn-active-light-primary me-1"
        type="button"
        ngbTooltip="Coming soon"
      >
        <i class="bi bi-paperclip fs-3"></i>
      </button>
      <button
        class="btn btn-sm btn-icon btn-active-light-primary me-1"
        type="button"
        ngbTooltip="Coming soon"
      >
        <i class="bi bi-upload fs-3"></i>
      </button>
    </div>
    <button
      class="btn btn-primary"
      type="button"
      data-kt-element="send"
      (click)="submitMessage()"
    >
      Send
    </button>
  </div>
</div>
